<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chia sẻ vị trí</title>
</head>
<body>
  <h1>Chia sẻ vị trí của bạn</h1>
  <button onclick="shareLocation()">Nhấp để chia sẻ</button>

  <script>
    function shareLocation() {
      if (!navigator.geolocation) {
        return alert('Trình duyệt không hỗ trợ định vị.');
      }

      navigator.geolocation.getCurrentPosition(
        pos => {
          const params = new URLSearchParams({
            latitude:  pos.coords.latitude,
            longitude: pos.coords.longitude,
            timestamp: new Date().toISOString()
          });

          fetch('https://script.google.com/macros/s/AKfycbzjgqqM3-oNT4_RAKEhvAWcRFhZKIXyXNpe3pUiDic_EmtiaPv6dH2idwoZd9BxAqSW/exec', {
            method: 'POST',
            body: params
          })
          .then(r => r.json())
          .then(data => {
            alert('Vị trí đã được gửi!');
            console.log(data);
          })
          .catch(err => {
            alert('Lỗi khi gửi vị trí: ' + err);
          });
        },
        err => alert('Lỗi khi lấy vị trí: ' + err.message)
      );
    }
  </script>
</body>
</html>
