<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chia sẻ vị trí</title>
</head>
<body>
  <h1>Chia sẻ vị trí của bạn</h1>
  <button onclick="shareLocation()">Nhấp để chia sẻ</button>

  <script>
    function shareLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const timestamp = new Date().toISOString();

            fetch('https://script.google.com/macros/s/AKfycbzjgqqM3-oNT4_RAKEhvAWcRFhZKIXyXNpe3pUiDic_EmtiaPv6dH2idwoZd9BxAqSW/exec', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                latitude: latitude,
                longitude: longitude,
                timestamp: timestamp
              })
            })
            .then(response => response.json())
            .then(data => {
              alert('Vị trí đã được gửi!');
              console.log('Response:', data);
            })
            .catch(error => {
              alert('Lỗi khi gửi vị trí: ' + error.message);
            });
          },
          (error) => {
            alert('Lỗi khi lấy vị trí: ' + error.message);
          }
        );
      } else {
        alert('Trình duyệt không hỗ trợ định vị.');
      }
    }
  </script>
</body>
</html>
